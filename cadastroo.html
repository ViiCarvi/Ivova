<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./stiyler.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/">
    <title>Inova Tech - Cadastro</title>
</head>
<body>
   <h1>Cadastro</h1> 
   <!-- Entrada para elaboração de um formulário -->
   <div class="nabuttons">
    <a href="./indexy.html" class="buttonn">Página Inicial</a>
    <a href="cadastroo.html"class="buttony"> Cadastro </a>
</div>
<script type="module">
    // Import Firebase SDK functions
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCpxF_wSFnKVCBZo4myZ92MLEgNbR3LE8Y",
        authDomain: "inova-tech-abf72.firebaseapp.com",
        projectId: "inova-tech-abf72",
        storageBucket: "inova-tech-abf72.appspot.com", // Corrigido aqui
        messagingSenderId: "605091198296",
        appId: "1:605091198296:web:790fbc3a64ef24a9f3a12d",
        measurementId: "G-DS1GK7L5CH"
    };

    // Initialize Firebase and Firestore
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Add submit event listener to the form
    document.getElementById('userForm').addEventListener('submit', async (e) => {
        e.preventDefault(); // Prevent form default submission

        // Capture form data
        const nome = document.getElementById('nome').value;
        const email = document.getElementById('email').value;
        const telefone = document.getElementById('telefone').value; // Nova linha para capturar telefone
        const cidade = document.getElementById('cidade').value; // Nova linha para capturar cidade
        const estado = document.getElementById('estado').value; // Nova linha para capturar estado
        const bairro = document.getElementById('bairro').value; // Nova linha para capturar bairro
        const CEP = document.getElementById('cep').value; // Nova linha para capturar cep

        try {
            // Add a new document with form data to Firestore
            await addDoc(collection(db, "usuarios"), {
                nome: nome,
                email: email,
                telefone: telefone,
                cidade: cidade,
                estado: estado,
                bairro: bairro,
                CEP: CEP
            });

            alert("Dados enviados com sucesso!");

            // Clear the form fields after submission
            document.getElementById('userForm').reset();
        } catch (error) {
            console.error("Erro ao adicionar documento: ", error);
            alert("Ocorreu um erro ao enviar os dados. Tente novamente.");
        }
    });
</script>
    <form id="userForm">
        <label for="nome">Nome:</label>
        <input type="text" required pattern="^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$" title="Digite Letras Maiúsculas e minúsculas" placeholder="Ex: Lays Souza" id="nome" name="nome">
        <br>
        <label for="email">E-mail:</label>
        <input type="email" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" placeholder="Ex: email@uol">
        <br>
        <label for="telefone">Telefone:</label>
        <input type="text" required placeholder="(88)88888-8888" pattern="\([0-9]{2}\)[\s][0-9]{5}-[0-9]{4}">
        <br>
        <label for="cidade">Cidade:</label>
        <input type="text" required pattern="^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$" title="Digite Letras Maiúsculas e minúsculas" placeholder="Ex: Rio de janeiro" id="cidade" name="cidade">
        <br>
        <label for="estado">Estado:</label>
        <input type="text" required pattern="^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$" title="Digite Letras Maiúsculas e minúsculas" placeholder="Ex: RJ" id="estado" name="estado">
        <br>
        <label for="bairro">Bairro:</label>
        <input type="text" required pattern="^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ ]+$" title="Digite Letras Maiúsculas e minúsculas" placeholder="Ex: Lays Souza" id="bairro" name="bairro">
        <br>
        <label for="cep">CEP:</label>
        <input type="text" placeholder="Ex: 88888-888 ">
        <button type="submit">Enviar</button>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>